# 準備

**注意：Windows ProでHyper-Vを使っている人は矢吹に相談してから帰ること**

次回までにやっておくこと。（ネットワークが遅いと1時間程度かかることに注意）

## Step 1（OSによる）

### Windowsの場合

1. [Docker Toolsbox for Windows](https://docs.docker.com/toolbox/toolbox_install_windows/)をインストールし，Windowsを再起動する。**プログラムは「c:/Program Files/Docker Toolbox」にインストールされるが，これを勝手に移動してはいけない。（これはDockerに限ったことではない。）**
2. Docker QuickStart Terminalを起動し（1回目は時間がかかる），`"C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" controlvm "default" natpf1 "jupyter,tcp,127.0.0.1,8888,,8888"
`を実行する。

### macOSの場合
1. [Docker for Mac](https://store.docker.com/editions/community/docker-ce-desktop-mac)をインストールする。（アカウント作成が必要かもしれない。）
2. 「端末」を起動する。

## Step 2（OSによらない）

3. `docker pull jupyter/datascience-notebook`を実行する（時間がかかる）。
4. `docker images`を実行すると，「 jupyter/datascience-notebook 」と表示されることを確認する。

以下では，Docker QuickStart Terminal（Windowsの場合）と端末（macOSの場合）を，**ターミナル**と呼ぶことにする。

## Step 3（作業フォルダ）

5. ターミナルで以下を実行し，作業用のフォルダを作る。（Windowsではc:/Users/ユーザ名/mining，macOSでは~/miningが作業フォルダになる。）

```{bash}
mkdir "$HOME/mining"
```

## Step 4（コンテナの生成）

6. コンテナを生成・起動する。

```{bash}
docker container run --name jupyter -d -p 8888:8888 -v "$HOME/mining":/home/jovyan/mining jupyter/datascience-notebook start-notebook.sh --NotebookApp.token=''
```

7. 練習のため，コンテナを一度停止させる。

```{bash}
docker container stop jupyter
```

8. コンテナの起動

```{bash}
docker container start jupyter
```

9. ブラウザからhttp://localhost:8888/ にアクセスする。

## Step 5（R）

10. フォルダ/mining にアクセスする。
11. New→RでRのセッションを起動する。
12. 作業フォルダにUntitled.ipynbというファイルができていることを確認する。
13. `sessionInfo()`と入力し，`Shift+Enter`。

## Step 6（コンテナの削除。通常はやらなくてよい）

14. コンテナを削除する。

```{bash}
docker container stop jupyter
docker container rm jupyter
```

もう一度生成するときは，上記の`docker container run...`を実行すればよい。

**練習：Rのセッションで20の階乗，つまり1×2×･･･×20を計算せよ。**
